# –î–æ—Ä–æ–≥–æ–π –î–µ–Ω–∏—Å,

–ü—Ä–∏–≤–µ—Ç —Å–Ω–æ–≤–∞, –¥—Ä—É–∂–∏—â–µ! üëã

–ü–æ–º–Ω–∏—à—å —Ç–æ–≥–æ —Ä–æ–±–æ—Ç–∞ –¥–ª—è –ª–æ–≥–æ–≤? –¢–µ–ø–µ—Ä—å –º—ã –¥–µ–ª–∞–µ–º –µ–≥–æ –¥–ª—è –ö—É–±–µ—Ä–Ω–µ—Ç–µ—Å–∞! –≠—Ç–æ –∫–∞–∫ –µ—Å–ª–∏ –±—ã —Ç–≤–æ–∏ –∏–≥—Ä—É—à–∫–∏ –∂–∏–ª–∏ –Ω–µ –ø—Ä–æ—Å—Ç–æ –≤ –∫–æ—Ä–æ–±–∫–∞—Ö, –∞ –≤ —Ü–µ–ª–æ–º –∏–≥—Ä—É—à–µ—á–Ω–æ–º –≥–æ—Ä–æ–¥–µ —Å –¥–æ–º–∏–∫–∞–º–∏ –∏ —É–ª–∏—Ü–∞–º–∏!

## –ß—Ç–æ –¢–∞–∫–æ–µ –ö—É–±–µ—Ä–Ω–µ—Ç–µ—Å, –î–µ–Ω–∏—Å? üèôÔ∏è

–ü—Ä–µ–¥—Å—Ç–∞–≤—å, —á—Ç–æ —É —Ç–µ–±—è –µ—Å—Ç—å –æ–≥—Ä–æ–º–Ω—ã–π –≥–æ—Ä–æ–¥ –¥–ª—è —Ç–≤–æ–∏—Ö –∏–≥—Ä—É—à–µ—á–Ω—ã—Ö —Ä–æ–±–æ—Ç–æ–≤. –í —ç—Ç–æ–º –≥–æ—Ä–æ–¥–µ:
- –ï—Å—Ç—å –¥–æ–º–∏–∫–∏ (–ø–æ–¥—ã) –≥–¥–µ –∂–∏–≤—É—Ç —Ç–≤–æ–∏ —Ä–æ–±–æ—Ç—ã (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- –£ –∫–∞–∂–¥–æ–≥–æ –¥–æ–º–∏–∫–∞ –µ—Å—Ç—å –±–∏—Ä–∫–∞ —Å –∏–º–µ–Ω–µ–º (–ª–µ–π–±–ª)
- –ï—Å—Ç—å –æ—Ö—Ä–∞–Ω–Ω–∏–∫–∏ (DaemonSet), –∫–æ—Ç–æ—Ä—ã–µ —Å–ª–µ–¥—è—Ç –∑–∞ –≤—Å–µ–º–∏ –¥–æ–º–∏–∫–∞–º–∏

## –¢–≤–æ–π –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –†–æ–±–æ—Ç-–û—Ö—Ä–∞–Ω–Ω–∏–∫ ü§ñ

–ù–∞—à —Ä–æ–±–æ—Ç Fluentd - —ç—Ç–æ –∫–∞–∫ –æ—Ö—Ä–∞–Ω–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π:
- –•–æ–¥–∏—Ç –ø–æ –≤—Å–µ–º –¥–æ–º–∏–∫–∞–º –≤ –≥–æ—Ä–æ–¥–µ
- –°–º–æ—Ç—Ä–∏—Ç –Ω–∞ –±–∏—Ä–∫–∏ –∏ –∏—â–µ—Ç –¥–æ–º–∏–∫–∏ —Å –Ω–∞–¥–ø–∏—Å—å—é "who=denis"
- –°–æ–±–∏—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ò–• –¥–Ω–µ–≤–Ω–∏–∫–∏ (–ª–æ–≥–∏)
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É —Å –∏–º–µ–Ω–µ–º —Ç–∏–ø–∞: `–¥–æ–º–∏–∫-1-–∫—Ä—É—Ç–æ–µ-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ-2025.05.19`

## –ö–∞–∫ –ó–∞–ø—É—Å—Ç–∏—Ç—å –¢–≤–æ–µ–≥–æ –†–æ–±–æ—Ç–∞, –î–µ–Ω–∏—Å üöÄ

### –®–∞–≥ 1: –°–∫–∞–∂–∏, –ì–¥–µ –¢–≤–æ–π –°–∫–ª–∞–¥ –ö–∞—Ä—Ç–∏–Ω–æ–∫
–î–µ–Ω–∏—Å, —Å–Ω–∞—á–∞–ª–∞ –Ω–∞–¥–æ —Å–∫–∞–∑–∞—Ç—å, –≥–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É —Ç–≤–æ–µ–≥–æ —Ä–æ–±–æ—Ç–∞:
```bash
export REGISTRY=—Ç–≤–æ–π-—Å–∫–ª–∞–¥-–∫–∞—Ä—Ç–∏–Ω–æ–∫
```

### –®–∞–≥ 2: –ü–æ—Å—Ç—Ä–æ–π –∏ –û—Ç–ø—Ä–∞–≤—å –†–æ–±–æ—Ç–∞
```bash
make push
```
(–≠—Ç–æ –∫–∞–∫ —Å–æ–±—Ä–∞—Ç—å –õ–ï–ì–û –∏ –ø–æ–ª–æ–∂–∏—Ç—å –≤ –∫–æ—Ä–æ–±–∫—É)

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∏ –ü–∞—Ä–æ–ª—å –æ—Ç –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏
```bash
kubectl edit secret elasticsearch-credentials -n kube-system
```
–ü–æ–º–Ω–∏, –î–µ–Ω–∏—Å - –ø–∞—Ä–æ–ª—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–π! –î–∞–∂–µ –æ—Ç –º–∞–º—ã —Å–ø—Ä—è—á—å!

### –®–∞–≥ 4: –ó–∞–ø—É—Å—Ç–∏ –í—Å—ë!
```bash
make deploy deploy-example
```
–ë–ê–ú! üí• –¢–≤–æ–π —Ä–æ–±–æ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç!

## –¢–≤–æ–∏ –ò–≥—Ä—É—à–µ—á–Ω—ã–µ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è üéÆ

–Ø —Å–¥–µ–ª–∞–ª –¥–ª—è —Ç–µ–±—è —Ç—Ä–∏ –ø—Ä–∏–º–µ—Ä–∞:

1. **denis-test-app** - –≠—Ç–æ –∫–∞–∫ –∏–≥—Ä—É—à–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥ –≥–æ–≤–æ—Ä–∏—Ç "–ü—Ä–∏–≤–µ—Ç!"
2. **denis-production-app** - –≠—Ç–æ —Å–µ—Ä—å—ë–∑–Ω—ã–π —Ä–æ–±–æ—Ç NGINX (–∫–∞–∫ –Ω–∞—Å—Ç–æ—è—â–∏–π!)
3. **other-app** - –≠—Ç–æ —á—É–∂–∞—è –∏–≥—Ä—É—à–∫–∞ (—É –Ω–µ—ë –±–∏—Ä–∫–∞ "who=notdenis"), —Ä–æ–±–æ—Ç –µ—ë –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç!

## –í–æ–ª—à–µ–±–Ω—ã–µ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –î–µ–Ω–∏—Å–∞ ü™Ñ

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å, —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ —Ä–æ–±–æ—Ç
make status

# –ü–æ–¥–≥–ª—è–¥–µ—Ç—å, —á—Ç–æ —Ä–æ–±–æ—Ç –¥–µ–ª–∞–µ—Ç
make logs

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —Å–æ–±–∏—Ä–∞–µ—Ç –ª–∏ —Ä–æ–±–æ—Ç –ª–æ–≥–∏
make test-logs

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ü–∏—Ñ–µ—Ä–∫–∏ (–º–µ—Ç—Ä–∏–∫–∏)
make forward-metrics

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ä–æ–±–æ—Ç–∞ (–µ—Å–ª–∏ –æ–Ω –∑–∞—Å—Ç—Ä—è–ª)
make restart

# –£–±—Ä–∞—Ç—å –≤—Å—ë (–∫–æ–≥–¥–∞ –Ω–∞–¥–æ–µ–ª–æ)
make clean clean-example
```

## –ï—Å–ª–∏ –ß—Ç–æ-—Ç–æ –°–ª–æ–º–∞–ª–æ—Å—å üò±

–î–µ–Ω–∏—Å, –Ω–µ –ø–∞–Ω–∏–∫—É–π! –í–æ—Ç —á—Ç–æ –¥–µ–ª–∞—Ç—å:

### 1. –ü—Ä–æ–≤–µ—Ä—å –ë–∏—Ä–∫–∏ –Ω–∞ –î–æ–º–∏–∫–∞—Ö
```bash
kubectl get pods --show-labels | grep denis
```
–¢—É—Ç —Ç—ã —É–≤–∏–¥–∏—à—å –≤—Å–µ –¥–æ–º–∏–∫–∏ —Å —Ç–≤–æ–∏–º –∏–º–µ–Ω–µ–º!

### 2. –†–æ–±–æ—Ç –í–æ–æ–±—â–µ –†–∞–±–æ—Ç–∞–µ—Ç?
```bash
kubectl get ds fluentd -n kube-system
```

### 3. –ß—Ç–æ –†–æ–±–æ—Ç –ì–æ–≤–æ—Ä–∏—Ç?
```bash
kubectl logs -n kube-system -l k8s-app=fluentd-logging
```

### 4. –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –û—Ç–≤–µ—á–∞–µ—Ç?
```bash
kubectl exec -n kube-system -it <–∏–º—è-—Ä–æ–±–æ—Ç–∞> -- curl -u elastic:–ø–∞—Ä–æ–ª—å https://elasticsearch:9200
```

## –ö–∞–∫ –ü–æ–º–µ–Ω—è—Ç—å –ù–∞—Å—Ç—Ä–æ–π–∫–∏ üîß

–î–µ–Ω–∏—Å, –µ—Å–ª–∏ —Ç–≤–æ–∏ –ª–æ–≥–∏ –Ω–µ JSON (—ç—Ç–æ —Ç–∞–∫–æ–π —Ñ–æ—Ä–º–∞—Ç), –∞ –ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç:

1. –ù–∞–π–¥–∏ –≤ —Ñ–∞–π–ª–µ `fluentd-daemonset.yaml` —Å—Ç—Ä–æ—á–∫—É —Å ConfigMap
2. –ü–æ–º–µ–Ω—è–π `@type json` –Ω–∞ `@type none` 
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ —Ä–æ–±–æ—Ç–∞: `make restart`

## –í–∞–∂–Ω—ã–µ –®—Ç—É–∫–∏ –¥–ª—è –ó–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è üß†

- –†–æ–±–æ—Ç —Å–º–æ—Ç—Ä–∏—Ç –¢–û–õ–¨–ö–û –Ω–∞ –¥–æ–º–∏–∫–∏ —Å –±–∏—Ä–∫–æ–π `who=denis`
- –ò–º—è –∏–Ω–¥–µ–∫—Å–∞ = `–∏–º—è-–∫–æ–º–ø—å—é—Ç–µ—Ä–∞-–∏–º—è-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è-–¥–∞—Ç–∞`
- –†–æ–±–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –í–°–ï–• –∫–æ–º–ø—å—é—Ç–µ—Ä–∞—Ö –≤ –≥–æ—Ä–æ–¥–µ
- –ï—Å–ª–∏ –¥–æ–±–∞–≤–∏—à—å –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –±–∏—Ä–∫–æ–π `who=denis`, —Ä–æ–±–æ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω—ë—Ç —Å–æ–±–∏—Ä–∞—Ç—å –µ–≥–æ –ª–æ–≥–∏!

## –°–µ–∫—Ä–µ—Ç–Ω—ã–π –°–æ–≤–µ—Ç ü§´

–î–µ–Ω–∏—Å, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –±—ã—Ç—å –∫—Ä—É—Ç—ã–º, –∑–∞–ø–æ–º–Ω–∏:
- `app=test-app` - —ç—Ç–æ –∏–º—è –ø—Ä–æ–µ–∫—Ç–∞ –≤ –∏–Ω–¥–µ–∫—Å–µ
- `who=denis` - —ç—Ç–æ —Ç–≤–æ—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –º–µ—Ç–∫–∞
- –ë–µ–∑ —Ç–≤–æ–µ–π –º–µ—Ç–∫–∏ —Ä–æ–±–æ—Ç –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ!

–£–¥–∞—á–∏ —Å —Ç–≤–æ–∏–º –ö—É–±–µ—Ä–Ω–µ—Ç–µ—Å-–≥–æ—Ä–æ–¥–æ–º, –î–µ–Ω–∏—Å! –¢—ã —Å–ø—Ä–∞–≤–∏—à—å—Å—è! üí™

–¢–≤–æ–π –¥—Ä—É–≥,
–ê–≤—Ç–æ—Ä README

P.S. - –ù–µ –∑–∞–±—É–¥—å –ø–æ–∫–æ—Ä–º–∏—Ç—å –∫–æ—Ç–∞ –∏ —Å–¥–µ–ª–∞—Ç—å —É—Ä–æ–∫–∏! –ê —Ç–æ –º–∞–º–∞ –±—É–¥–µ—Ç —Ä—É–≥–∞—Ç—å—Å—è! üê±üìö

P.P.S. - –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ–ø—Ä–æ–±—É–π –≤—ã–∫–ª—é—á–∏—Ç—å –∏ –≤–∫–ª—é—á–∏—Ç—å. –ò–ª–∏ –ø–æ–∑–æ–≤–∏ –≤–∑—Ä–æ—Å–ª–æ–≥–æ, –∫–æ—Ç–æ—Ä—ã–π –∑–Ω–∞–µ—Ç kubectl! üòâ